# Задание на л.р. №6
# Задана рекуррентная функция. Область определения функции – натуральные числа. Написать программу сравнительного вычисления данной функции рекурсивно и итерационно (значение, время). 
# Определить (смоделировать) границы применимости рекурсивного и итерационного подхода. 
# Результаты сравнительного исследования времени вычисления представить в табличной и графической форме в виде отчета по лабораторной работе.
# Вариант 25. F(0) = F(1) = 3, F(n) = (-1)n*(sin(F(n–1)-F(n-2)) /(2n)!), при n > 1

import time
import math
import matplotlib.pyplot as plt

# Рекурсивная реализация функции F
def F_recursive(n):
    if n == 0 or n == 1:
        return 3
    else:
        return (-1)**n * (math.sin(F_recursive(n - 1) - F_recursive(n - 2)) / math.factorial(2 * n))

# Итеративная реализация функции F
def F_iterative(n):
    if n == 0 or n == 1:
        return 3
    results = [3, 3]  # F(0) и F(1)
    for i in range(2, n + 1):
        results.append((-1)**i * (math.sin(results[i - 1] - results[i - 2]) / math.factorial(2 * i)))
    return results[n]

# Сравнение времени выполнения
n_values = range(2, 20)  # Измените верхнюю границу при необходимости
recursive_times = []
iterative_times = []

for n in n_values:
    # Измерение времени рекурсивной функции
    start_time = time.time()
    F_recursive(n)
    recursive_times.append(time.time() - start_time)

    # Измерение времени итеративной функции
    start_time = time.time()
    F_iterative(n)
    iterative_times.append(time.time() - start_time)

# Вывод результатов в виде таблицы
print("n\tRecursive Time\tIterative Time")
for n, rec_time, it_time in zip(n_values, recursive_times, iterative_times):
    print(f"{n}\t{rec_time:.6f}\t{it_time:.6f}")

# Построение графиков
plt.plot(n_values, recursive_times, label='Recursive Time', marker='o')
plt.plot(n_values, iterative_times, label='Iterative Time', marker='o')
plt.xlabel('n')
plt.ylabel('Time (seconds)')
plt.title('Comparison of Recursive and Iterative Function Execution Time')
plt.legend()
plt.grid()
plt.show()
